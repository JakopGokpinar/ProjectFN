{"ast":null,"code":"var _jsxFileName = \"/home/tolga/VS Code workspace/Brukth\\xE5nd/secondhand/src/Pages/CreateAnnonce/AnnonceRoute.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport CarAnnonce from \"./components/CarAnnonce\";\nimport PropertyAnnonce from \"./components/PropertyAnnonce\";\nimport ContactInformation from \"./Seller\";\nimport PhotoAndDescription from \"./Media\";\nimport Spinner from \"../../Component/Spinner/Spinner\";\nimport axios from \"axios\";\nimport { getCroppedImage } from \"../../utils/cropImage\";\nimport { dataURLtoFile } from \"../../utils/dataURltoFile\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AnnonceRoute(props) {\n  _s();\n\n  var {\n    categoryName\n  } = useParams();\n  const [annonceComponent, setComponent] = useState( /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false));\n  const [isLoading, setLoading] = useState(true);\n  const [properties, setProperties] = useState({\n    uniqueProps: {}\n  });\n  const [seller, setSeller] = useState({});\n  const [images, setImages] = useState();\n\n  function findCategory() {\n    if (isLoading) {\n      switch (categoryName) {\n        case \"bil\":\n          setComponent( /*#__PURE__*/_jsxDEV(CarAnnonce, {\n            func: handleUniquePropChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 24\n          }, this));\n          setLoading(false);\n          break;\n\n        case \"enebolig\":\n          setComponent( /*#__PURE__*/_jsxDEV(PropertyAnnonce, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 24\n          }, this));\n          setLoading(false);\n          break;\n\n        default:\n          setComponent( /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Annonce type couldn't found!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 24\n          }, this));\n          setLoading(false);\n          break;\n      }\n    }\n  }\n\n  const handlePropertiesChange = e => {\n    var target = e.target.id;\n    const value = e.target.value;\n    console.log(\"target and val\", target + \" \" + value);\n    const prop = properties;\n    prop[target] = value;\n    setProperties(prop);\n  };\n\n  const handleUniquePropChange = e => {\n    var target = e.target.id;\n    const value = e.target.value;\n    const prop = properties;\n    prop.uniqueProps[target] = value;\n    setProperties(prop);\n  };\n\n  const handleSellerPropChange = e => {\n    var target = e.target.id;\n    const value = e.target.value;\n    const prop = seller;\n    prop[target] = value;\n    setSeller(prop);\n  };\n\n  const handleImageChange = imgArray => {\n    setImages(imgArray);\n    console.log(imgArray);\n  };\n\n  const submitAnnonce = async () => {\n    var formData = new FormData(); // create form to data to upload images properly\n\n    let selectedFiles = images;\n\n    if (selectedFiles) {\n      for (let i = 0; i < selectedFiles.length; i++) {\n        var img = selectedFiles[i];\n        const canvas = await getCroppedImage(img);\n        const canvasDataUrl = canvas.toDataURL(\"image/jpeg\");\n        const convertedUrltoFile = dataURLtoFile(canvasDataUrl, `${Date.now()}-myimage.jpg`);\n        console.log(convertedUrltoFile);\n        formData.append(\"galleryImage\", convertedUrltoFile);\n      }\n    } // first make request for image uploading\n\n\n    axios.post(`http://localhost:3080/file/uploadimages?location=ahmet/annonces/${properties.title}`, formData).then(response => {\n      console.log(response);\n      var locations = [];\n      response.data.files.map(elem => {\n        return locations.push(elem.location);\n      });\n      var annonce = {\n        properties,\n        locations,\n        seller\n      };\n      console.log(annonce); // second, make request to create annonce with the locations of uploaded images\n\n      axios.post(\"http://localhost:3080/file/createannonce\", annonce).then(respond => {\n        console.log(respond);\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    findCategory();\n    console.log(\"cate:\", props.match.params.category);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Properties\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        htmlFor: \"title\",\n        children: \"Tittelen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"title\",\n          \"aria-describedby\": \"title\",\n          onChange: handlePropertiesChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        htmlFor: \"price\",\n        children: \"Price\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"price\",\n          \"aria-describedby\": \"price\",\n          onChange: handlePropertiesChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        htmlFor: \"category\",\n        children: \"category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"category\",\n          \"aria-describedby\": \"category\",\n          onChange: handlePropertiesChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        htmlFor: \"subCategory\",\n        children: \"Sub category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"subCategory\",\n          \"aria-describedby\": \"subCategory\",\n          onChange: handlePropertiesChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this), annonceComponent, /*#__PURE__*/_jsxDEV(PhotoAndDescription, {\n        onchange: handleImageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ContactInformation, {\n        onchange: handleSellerPropChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary w-100 mb-5\",\n        type: \"button\",\n        onClick: submitAnnonce,\n        children: \"Publish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AnnonceRoute, \"chmYnMazL6Ej1m8OknUvB1sXngg=\", false, function () {\n  return [useParams];\n});\n\n_c = AnnonceRoute;\nexport default AnnonceRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"AnnonceRoute\");","map":{"version":3,"sources":["/home/tolga/VS Code workspace/Brukth√•nd/secondhand/src/Pages/CreateAnnonce/AnnonceRoute.js"],"names":["useEffect","useState","useParams","CarAnnonce","PropertyAnnonce","ContactInformation","PhotoAndDescription","Spinner","axios","getCroppedImage","dataURLtoFile","AnnonceRoute","props","categoryName","annonceComponent","setComponent","isLoading","setLoading","properties","setProperties","uniqueProps","seller","setSeller","images","setImages","findCategory","handleUniquePropChange","handlePropertiesChange","e","target","id","value","console","log","prop","handleSellerPropChange","handleImageChange","imgArray","submitAnnonce","formData","FormData","selectedFiles","i","length","img","canvas","canvasDataUrl","toDataURL","convertedUrltoFile","Date","now","append","post","title","then","response","locations","data","files","map","elem","push","location","annonce","respond","catch","err","match","params","category"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport CarAnnonce from \"./components/CarAnnonce\";\nimport PropertyAnnonce from \"./components/PropertyAnnonce\";\nimport ContactInformation from \"./Seller\";\nimport PhotoAndDescription from \"./Media\";\nimport Spinner from \"../../Component/Spinner/Spinner\";\nimport axios from \"axios\";\nimport { getCroppedImage } from \"../../utils/cropImage\";\nimport { dataURLtoFile } from \"../../utils/dataURltoFile\";\n\nfunction AnnonceRoute(props) {\n  var { categoryName } = useParams();\n  const [annonceComponent, setComponent] = useState(<></>);\n  const [isLoading, setLoading] = useState(true);\n  const [properties, setProperties] = useState({ uniqueProps: {} });\n  const [seller, setSeller] = useState({});\n  const [images, setImages] = useState();\n\n  function findCategory() {\n    if (isLoading) {\n      switch (categoryName) {\n        case \"bil\":\n          setComponent(<CarAnnonce func={handleUniquePropChange}></CarAnnonce>);\n          setLoading(false);\n          break;\n        case \"enebolig\":\n          setComponent(<PropertyAnnonce></PropertyAnnonce>);\n          setLoading(false);\n          break;\n        default:\n          setComponent(<p>Annonce type couldn't found!</p>);\n          setLoading(false);\n          break;\n      }\n    }\n  }\n\n  const handlePropertiesChange = (e) => {\n    var target = e.target.id;\n    const value = e.target.value;\n    console.log(\"target and val\", target + \" \" + value)\n    const prop = properties;\n\n    prop[target] = value;\n    setProperties(prop);\n  };\n\n  const handleUniquePropChange = (e) => {\n    var target = e.target.id;\n    const value = e.target.value;\n    const prop = properties;\n\n    prop.uniqueProps[target] = value;\n    setProperties(prop);\n  };\n\n  const handleSellerPropChange = (e) => {\n    var target = e.target.id;\n    const value = e.target.value;\n    const prop = seller;\n\n    prop[target] = value;\n    setSeller(prop);\n  };\n\n  const handleImageChange = (imgArray) => {\n    setImages(imgArray);\n      console.log(imgArray);\n  };\n\n  const submitAnnonce = async () => {\n    var formData = new FormData(); // create form to data to upload images properly\n    let selectedFiles = images;\n\n    if (selectedFiles) {\n      for (let i = 0; i < selectedFiles.length; i++) {\n        var img = selectedFiles[i];\n        const canvas = await getCroppedImage(img);\n        const canvasDataUrl = canvas.toDataURL(\"image/jpeg\");\n        const convertedUrltoFile = dataURLtoFile(\n          canvasDataUrl,\n          `${Date.now()}-myimage.jpg`\n        );\n        console.log(convertedUrltoFile);\n\n        formData.append(\"galleryImage\", convertedUrltoFile);\n      }\n    }\n    // first make request for image uploading\n    axios\n      .post(\n        `http://localhost:3080/file/uploadimages?location=ahmet/annonces/${properties.title}`,\n        formData\n      )\n      .then((response) => {\n        console.log(response);\n        var locations = [];\n        response.data.files.map((elem) => {\n          return locations.push(elem.location);\n        });\n        var annonce = { properties, locations, seller };\n        console.log(annonce);\n        // second, make request to create annonce with the locations of uploaded images\n        axios\n          .post(\"http://localhost:3080/file/createannonce\", annonce)\n          .then((respond) => {\n            console.log(respond);\n          });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  useEffect(() => {\n    findCategory();\n    console.log(\"cate:\", props.match.params.category)\n  });\n\n  return (\n    <div>\n      {!isLoading ? (\n        <div>\n          <h4>Properties</h4>\n          <label className=\"form-label\" htmlFor=\"title\">\n            Tittelen\n          </label>\n          <div className=\"input-group mb-3\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"title\"\n              aria-describedby=\"title\"\n              onChange={handlePropertiesChange}\n            />\n          </div>\n          <label className=\"form-label\" htmlFor=\"price\">\n            Price\n          </label>\n          <div className=\"input-group mb-3\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"price\"\n              aria-describedby=\"price\"\n              onChange={handlePropertiesChange}\n            />\n          </div>\n          <label className=\"form-label\" htmlFor=\"category\">\n            category\n          </label>\n          <div className=\"input-group mb-3\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"category\"\n              aria-describedby=\"category\"\n              onChange={handlePropertiesChange}\n            />\n          </div>\n          <label className=\"form-label\" htmlFor=\"subCategory\">\n            Sub category\n          </label>\n          <div className=\"input-group mb-3\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"subCategory\"\n              aria-describedby=\"subCategory\"\n              onChange={handlePropertiesChange}\n            />\n          </div>\n          {annonceComponent}\n          <PhotoAndDescription\n            onchange={handleImageChange}\n          ></PhotoAndDescription>\n          <ContactInformation\n            onchange={handleSellerPropChange}\n          ></ContactInformation>\n          <button\n            className=\"btn btn-primary w-100 mb-5\"\n            type=\"button\"\n            onClick={submitAnnonce}\n          >\n            Publish\n          </button>\n        </div>\n      ) : (\n        <Spinner />\n      )}\n    </div>\n  );\n}\n\nexport default AnnonceRoute;\n"]},"metadata":{},"sourceType":"module"}