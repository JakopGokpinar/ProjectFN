{"ast":null,"code":"var _jsxFileName = \"/home/tolga/VS Code workspace/Brukth\\xE5nd/secondhand/src/Pages/SearchedResultPage/SearchResult.js\";\nimport React from \"react\";\nimport \"./SearchResult.css\";\nimport ProductCard from \"../../Component/ProductCard/ProductCard.js\";\nimport { instanceAxs } from \"../../config/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass SearchResult extends React.Component {\n  constructor(props) {\n    super(props);\n    this.setSortingCategory = value => {\n      var finalArray = this.state.items;\n      if (value === \"price_desc\") {\n        let priceDescArray = [].concat(finalArray).sort((a, b) => a.price > b.price ? 1 : -1);\n        finalArray = priceDescArray;\n      } else if (value === \"price_asc\") {\n        let priceAscArray = [].concat(finalArray).sort((a, b) => a.price < b.price ? 1 : -1);\n        finalArray = priceAscArray;\n      } else if (value === \"published\") {\n        let publishArray = [].concat(finalArray).sort((a, b) => a.date < b.date ? 1 : -1);\n        finalArray = publishArray;\n      }\n      this.setState({\n        items: finalArray\n      });\n    };\n    this.getFiltersOnMount = () => {\n      let urlParams = new URLSearchParams(window.location.search);\n      var params = [];\n      for (const [key, value] of urlParams) {\n        var filter = {};\n        switch (key) {\n          case 'q':\n            filter = {\n              queryKey: key,\n              queryValue: value,\n              tagKey: undefined,\n              tagValue: undefined\n            };\n            params.push(filter);\n            break;\n          case 'price_max':\n            filter = {\n              queryKey: key,\n              queryValue: value,\n              tagKey: \"maxPrice\",\n              tagValue: `til ${value}`\n            };\n            params.push(filter);\n            break;\n          case 'price_min':\n            filter = {\n              queryKey: key,\n              queryValue: value,\n              tagKey: \"minPrice\",\n              tagValue: `fra ${value}`\n            };\n            params.push(filter);\n            break;\n          case 'status':\n            if (value === \"new\") {\n              filter = {\n                queryKey: key,\n                queryValue: value,\n                tagKey: \"statusNew\",\n                tagValue: \"Nytt\"\n              };\n            } else if (value === \"used\") {\n              filter = {\n                queryKey: key,\n                queryValue: value,\n                tagKey: \"statusUsed\",\n                tagValue: \"Brukt\"\n              };\n            }\n            params.push(filter);\n            break;\n          case 'published':\n            filter = {\n              queryKey: key,\n              queryValue: value,\n              tagKey: key,\n              tagValue: value\n            };\n            params.push(filter);\n            break;\n          default:\n        }\n      }\n      this.setState({\n        filters: params\n      });\n      return params;\n    };\n    this.makeSearch = () => {\n      this.searchAlgorithm(this.state.filters);\n    };\n    this.searchAlgorithm = filters => {\n      let queryString = this.returnQueryString(filters);\n      // let query = `/file/getmenuitems?${queryString}`;\n      let query2 = '/searchproduct?q=e';\n      instanceAxs.get(query2).then(response => {\n        console.log(\"Search response\", response.data);\n        if (response.status === 200) {\n          const productArray = response.data.productArray;\n          this.setState({\n            productArray\n          });\n          window.history.pushState(\"page2\", \"seach made\", `/search?${queryString}`);\n        } else {\n          console.log(response.data.message);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n    this.state = {\n      productArray: [],\n      urlParams: new URLSearchParams(props.location.search),\n      filters: [{\n        queryKey: \"q\",\n        queryValue: new URLSearchParams(props.location.search).get(\"q\")\n      }]\n    };\n  }\n  returnQueryString(filters) {\n    var queryString = \"\";\n    for (const filter of filters) {\n      queryString += `${filter.queryKey}=${filter.queryValue}&`;\n    }\n    if (queryString[queryString.length - 1] === \"&\") queryString = queryString.slice(0, queryString.length - 1);\n    return queryString;\n  }\n  componentDidMount() {\n    let params = this.getFiltersOnMount();\n    this.searchAlgorithm(params);\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" \",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.makeSearch,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        defaultValue: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          disabled: true,\n          children: \"Select a main category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"biler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"enebolig\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this), this.state.productArray.map(item => {\n        return /*#__PURE__*/_jsxDEV(ProductCard, {\n          img: item.annonceImages,\n          name: item.title,\n          location: item.location,\n          price: item.price,\n          id: item._id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 15\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default SearchResult;","map":{"version":3,"names":["React","ProductCard","instanceAxs","SearchResult","Component","constructor","props","setSortingCategory","value","finalArray","state","items","priceDescArray","concat","sort","a","b","price","priceAscArray","publishArray","date","setState","getFiltersOnMount","urlParams","URLSearchParams","window","location","search","params","key","filter","queryKey","queryValue","tagKey","undefined","tagValue","push","filters","makeSearch","searchAlgorithm","queryString","returnQueryString","query2","get","then","response","console","log","data","status","productArray","history","pushState","message","catch","err","length","slice","componentDidMount","render","map","item","annonceImages","title","_id"],"sources":["/home/tolga/VS Code workspace/BrukthÃ¥nd/secondhand/src/Pages/SearchedResultPage/SearchResult.js"],"sourcesContent":["import React from \"react\";\r\nimport \"./SearchResult.css\";\r\nimport ProductCard from \"../../Component/ProductCard/ProductCard.js\";\r\nimport { instanceAxs } from \"../../config/api\";\r\n\r\n\r\nclass SearchResult extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      productArray: [],\r\n      urlParams: new URLSearchParams(props.location.search),\r\n      filters: [\r\n        {\r\n          queryKey: \"q\",\r\n          queryValue: new URLSearchParams(props.location.search).get(\"q\"),\r\n        }\r\n      ],\r\n    };\r\n  }\r\n\r\n  setSortingCategory = (value) => {\r\n    var finalArray = this.state.items;\r\n\r\n    if(value === \"price_desc\") {\r\n      let priceDescArray = [].concat(finalArray)\r\n     .sort((a, b) => a.price > b.price ? 1 : -1)\r\n      finalArray = priceDescArray;\r\n    } else if(value === \"price_asc\") {\r\n      let priceAscArray = [].concat(finalArray)\r\n    .sort((a, b) => a.price < b.price ? 1 : -1)\r\n      finalArray = priceAscArray;\r\n    } else if(value === \"published\") {\r\n      let publishArray = [].concat(finalArray)\r\n    .sort((a, b) => a.date < b.date ? 1 : -1)\r\n      finalArray = publishArray;\r\n    }\r\n\r\n    this.setState({\r\n      items: finalArray\r\n    })\r\n  };\r\n\r\n  getFiltersOnMount = () => {\r\n    let urlParams = new URLSearchParams(window.location.search)\r\n\r\n    var params = [];\r\n    for (const [key, value] of urlParams) {\r\n      var filter = {};\r\n\r\n      switch(key){\r\n        case 'q':\r\n          filter = {\r\n            queryKey: key,\r\n            queryValue: value,\r\n            tagKey: undefined,\r\n            tagValue: undefined,\r\n          };\r\n          params.push(filter)\r\n          break;\r\n        case 'price_max':\r\n          filter = {\r\n            queryKey: key,\r\n            queryValue: value,\r\n            tagKey: \"maxPrice\",\r\n            tagValue: `til ${value}`,\r\n          };\r\n          params.push(filter);\r\n          break;\r\n        case 'price_min':\r\n          filter = {\r\n            queryKey: key,\r\n            queryValue: value,\r\n            tagKey: \"minPrice\",\r\n            tagValue: `fra ${value}`,\r\n          };\r\n          params.push(filter);\r\n          break;\r\n        case 'status':\r\n          if(value === \"new\") {\r\n            filter = {\r\n              queryKey: key,\r\n              queryValue: value,\r\n              tagKey: \"statusNew\",\r\n              tagValue: \"Nytt\",\r\n            };\r\n          } else if(value === \"used\") {\r\n            filter = {\r\n              queryKey: key,\r\n              queryValue: value,\r\n              tagKey: \"statusUsed\",\r\n              tagValue: \"Brukt\",\r\n            };\r\n          } \r\n          params.push(filter);\r\n          break;\r\n        case 'published':\r\n          filter = {\r\n            queryKey : key,\r\n            queryValue: value,\r\n            tagKey: key,\r\n            tagValue: value\r\n          }\r\n          params.push(filter);\r\n          break;\r\n        default:\r\n          \r\n      }\r\n    }\r\n    this.setState({\r\n      filters: params\r\n    });\r\n    return params;\r\n  };\r\n\r\n  makeSearch = () => {\r\n      this.searchAlgorithm(this.state.filters) \r\n  };\r\n\r\n  returnQueryString(filters) {\r\n    var queryString = \"\";\r\n    for (const filter of filters) {\r\n      queryString += `${filter.queryKey}=${filter.queryValue}&`;\r\n    }\r\n    if (queryString[queryString.length - 1] === \"&\")\r\n      queryString = queryString.slice(0, queryString.length - 1);\r\n\r\n    return queryString;\r\n  }\r\n\r\n  searchAlgorithm = (filters) => {\r\n    \r\n    let queryString = this.returnQueryString(filters);\r\n    // let query = `/file/getmenuitems?${queryString}`;\r\n    let query2 = '/searchproduct?q=e'\r\n    instanceAxs\r\n      .get(query2)\r\n      .then((response) => {\r\n        console.log(\"Search response\", response.data);\r\n        if (response.status === 200) {\r\n          const productArray = response.data.productArray;\r\n          this.setState({ productArray });\r\n          window.history.pushState(\"page2\", \"seach made\", `/search?${queryString}`);\r\n        } else {\r\n          console.log(response.data.message)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    let params = this.getFiltersOnMount();\r\n    this.searchAlgorithm(params)\r\n  }\r\n\r\n   render() {\r\n    return (\r\n      <div className=\" \">\r\n          <button  onClick={this.makeSearch}>\r\n            Search\r\n          </button>\r\n          <select defaultValue=\"\">\r\n            <option value=\"\" disabled>Select a main category</option>\r\n            <option>biler</option>\r\n            <option>enebolig</option>\r\n          </select>\r\n          {this.state.productArray.map(item => {\r\n            return(\r\n              <ProductCard\r\n                img = {item.annonceImages}\r\n                name={item.title}\r\n                location={item.location}\r\n                price={item.price}\r\n                id={item._id}\r\n              ></ProductCard>\r\n            )\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchResult;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}