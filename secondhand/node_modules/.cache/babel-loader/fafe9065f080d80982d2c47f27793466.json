{"ast":null,"code":"var _jsxFileName = \"/home/tolga/VS Code workspace/Brukth\\xE5nd/secondhand/src/Pages/SearchedResultPage/SearchResult.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport \"./SearchResult.css\";\nimport ProductCard from \"../../Component/ProductCard/ProductCard.js\";\nimport { instanceAxs } from \"../../config/api\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchResult = () => {\n  _s();\n  const [productArray, setProductArray] = useParams([]);\n  const location = useLo;\n  const [filters, setFilters] = useParams([{\n    queryKey: 'q',\n    queryValue: new URLSearchParams(props.location.search).get(\"q\")\n  }]);\n  const urlParams = new URLSearchParams(props.location.search);\n\n  /*   const setSortingCategory = (value) => {\r\n      var finalArray = this.state.items;\r\n  \r\n      if(value === \"price_desc\") {\r\n        let priceDescArray = [].concat(finalArray)\r\n       .sort((a, b) => a.price > b.price ? 1 : -1)\r\n        finalArray = priceDescArray;\r\n      } else if(value === \"price_asc\") {\r\n        let priceAscArray = [].concat(finalArray)\r\n      .sort((a, b) => a.price < b.price ? 1 : -1)\r\n        finalArray = priceAscArray;\r\n      } else if(value === \"published\") {\r\n        let publishArray = [].concat(finalArray)\r\n      .sort((a, b) => a.date < b.date ? 1 : -1)\r\n        finalArray = publishArray;\r\n      }\r\n  \r\n      this.setState({\r\n        items: finalArray\r\n      })\r\n    }; */\n\n  /*   const getFiltersOnMount = () => {\r\n      let urlParams = new URLSearchParams(window.location.search)\r\n  \r\n      var params = [];\r\n      for (const [key, value] of urlParams) {\r\n        var filter = {};\r\n  \r\n        switch(key){\r\n          case 'q':\r\n            filter = {\r\n              queryKey: key,\r\n              queryValue: value,\r\n              tagKey: undefined,\r\n              tagValue: undefined,\r\n            };\r\n            params.push(filter)\r\n            break;\r\n          case 'price_max':\r\n            filter = {\r\n              queryKey: key,\r\n              queryValue: value,\r\n              tagKey: \"maxPrice\",\r\n              tagValue: `til ${value}`,\r\n            };\r\n            params.push(filter);\r\n            break;\r\n          case 'price_min':\r\n            filter = {\r\n              queryKey: key,\r\n              queryValue: value,\r\n              tagKey: \"minPrice\",\r\n              tagValue: `fra ${value}`,\r\n            };\r\n            params.push(filter);\r\n            break;\r\n          case 'status':\r\n            if(value === \"new\") {\r\n              filter = {\r\n                queryKey: key,\r\n                queryValue: value,\r\n                tagKey: \"statusNew\",\r\n                tagValue: \"Nytt\",\r\n              };\r\n            } else if(value === \"used\") {\r\n              filter = {\r\n                queryKey: key,\r\n                queryValue: value,\r\n                tagKey: \"statusUsed\",\r\n                tagValue: \"Brukt\",\r\n              };\r\n            } \r\n            params.push(filter);\r\n            break;\r\n          case 'published':\r\n            filter = {\r\n              queryKey : key,\r\n              queryValue: value,\r\n              tagKey: key,\r\n              tagValue: value\r\n            }\r\n            params.push(filter);\r\n            break;\r\n          default:\r\n            \r\n        }\r\n      }\r\n      this.setState({\r\n        filters: params\r\n      });\r\n      return params;\r\n    }; */\n\n  /*   const makeSearch = () => {\r\n        this.searchAlgorithm(this.state.filters) \r\n    }; */\n\n  /*   const returnQueryString = (filters) => {\r\n      var queryString = \"\";\r\n      for (const filter of filters) {\r\n        queryString += `${filter.queryKey}=${filter.queryValue}&`;\r\n      }\r\n      if (queryString[queryString.length - 1] === \"&\")\r\n        queryString = queryString.slice(0, queryString.length - 1);\r\n  \r\n      return queryString;\r\n    } */\n\n  const searchAlgorithm = filters => {\n    let queryString = this.returnQueryString(filters);\n    // let query = `/file/getmenuitems?${queryString}`;\n    let query2 = '/searchproduct?q=e';\n    instanceAxs.get(query2).then(response => {\n      console.log(\"Search response\", response.data);\n      if (response.status === 200) {\n        const productArray = response.data.productArray;\n        this.setState({\n          productArray\n        });\n        window.history.pushState(\"page2\", \"seach made\", `/search?${queryString}`);\n      } else {\n        console.log(response.data.message);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  useEffect(() => {\n    let params = this.getFiltersOnMount();\n    this.searchAlgorithm(params);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" \",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: makeSearch,\n      children: \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      defaultValue: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        disabled: true,\n        children: \"Select a main category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"biler\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"enebolig\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }, this), productArray.map(item => {\n      return /*#__PURE__*/_jsxDEV(ProductCard, {\n        img: item.annonceImages,\n        name: item.title,\n        location: item.location,\n        price: item.price,\n        id: item._id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 7\n  }, this);\n};\n_s(SearchResult, \"fDBqvWgF8mAwphrGQMDur0gSLcE=\", false, function () {\n  return [useParams, useParams];\n});\n_c = SearchResult;\nexport default SearchResult;\nvar _c;\n$RefreshReg$(_c, \"SearchResult\");","map":{"version":3,"names":["React","useEffect","ProductCard","instanceAxs","useParams","SearchResult","productArray","setProductArray","location","useLo","filters","setFilters","queryKey","queryValue","URLSearchParams","props","search","get","urlParams","searchAlgorithm","queryString","returnQueryString","query2","then","response","console","log","data","status","setState","window","history","pushState","message","catch","err","params","getFiltersOnMount","makeSearch","map","item","annonceImages","title","price","_id"],"sources":["/home/tolga/VS Code workspace/BrukthÃ¥nd/secondhand/src/Pages/SearchedResultPage/SearchResult.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport \"./SearchResult.css\";\r\nimport ProductCard from \"../../Component/ProductCard/ProductCard.js\";\r\nimport { instanceAxs } from \"../../config/api\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\n\r\nconst SearchResult = () => {\r\n\r\n  const [productArray, setProductArray] = useParams([]);\r\n  const location = useLo\r\n  const [filters, setFilters] = useParams([{\r\n    queryKey: 'q',\r\n    queryValue:  new URLSearchParams(props.location.search).get(\"q\"),\r\n  }]);\r\n  const urlParams = new URLSearchParams(props.location.search);\r\n\r\n\r\n/*   const setSortingCategory = (value) => {\r\n    var finalArray = this.state.items;\r\n\r\n    if(value === \"price_desc\") {\r\n      let priceDescArray = [].concat(finalArray)\r\n     .sort((a, b) => a.price > b.price ? 1 : -1)\r\n      finalArray = priceDescArray;\r\n    } else if(value === \"price_asc\") {\r\n      let priceAscArray = [].concat(finalArray)\r\n    .sort((a, b) => a.price < b.price ? 1 : -1)\r\n      finalArray = priceAscArray;\r\n    } else if(value === \"published\") {\r\n      let publishArray = [].concat(finalArray)\r\n    .sort((a, b) => a.date < b.date ? 1 : -1)\r\n      finalArray = publishArray;\r\n    }\r\n\r\n    this.setState({\r\n      items: finalArray\r\n    })\r\n  }; */\r\n\r\n/*   const getFiltersOnMount = () => {\r\n    let urlParams = new URLSearchParams(window.location.search)\r\n\r\n    var params = [];\r\n    for (const [key, value] of urlParams) {\r\n      var filter = {};\r\n\r\n      switch(key){\r\n        case 'q':\r\n          filter = {\r\n            queryKey: key,\r\n            queryValue: value,\r\n            tagKey: undefined,\r\n            tagValue: undefined,\r\n          };\r\n          params.push(filter)\r\n          break;\r\n        case 'price_max':\r\n          filter = {\r\n            queryKey: key,\r\n            queryValue: value,\r\n            tagKey: \"maxPrice\",\r\n            tagValue: `til ${value}`,\r\n          };\r\n          params.push(filter);\r\n          break;\r\n        case 'price_min':\r\n          filter = {\r\n            queryKey: key,\r\n            queryValue: value,\r\n            tagKey: \"minPrice\",\r\n            tagValue: `fra ${value}`,\r\n          };\r\n          params.push(filter);\r\n          break;\r\n        case 'status':\r\n          if(value === \"new\") {\r\n            filter = {\r\n              queryKey: key,\r\n              queryValue: value,\r\n              tagKey: \"statusNew\",\r\n              tagValue: \"Nytt\",\r\n            };\r\n          } else if(value === \"used\") {\r\n            filter = {\r\n              queryKey: key,\r\n              queryValue: value,\r\n              tagKey: \"statusUsed\",\r\n              tagValue: \"Brukt\",\r\n            };\r\n          } \r\n          params.push(filter);\r\n          break;\r\n        case 'published':\r\n          filter = {\r\n            queryKey : key,\r\n            queryValue: value,\r\n            tagKey: key,\r\n            tagValue: value\r\n          }\r\n          params.push(filter);\r\n          break;\r\n        default:\r\n          \r\n      }\r\n    }\r\n    this.setState({\r\n      filters: params\r\n    });\r\n    return params;\r\n  }; */\r\n\r\n/*   const makeSearch = () => {\r\n      this.searchAlgorithm(this.state.filters) \r\n  }; */\r\n\r\n/*   const returnQueryString = (filters) => {\r\n    var queryString = \"\";\r\n    for (const filter of filters) {\r\n      queryString += `${filter.queryKey}=${filter.queryValue}&`;\r\n    }\r\n    if (queryString[queryString.length - 1] === \"&\")\r\n      queryString = queryString.slice(0, queryString.length - 1);\r\n\r\n    return queryString;\r\n  } */\r\n\r\n  const searchAlgorithm = (filters) => {\r\n    \r\n    let queryString = this.returnQueryString(filters);\r\n    // let query = `/file/getmenuitems?${queryString}`;\r\n    let query2 = '/searchproduct?q=e'\r\n    instanceAxs\r\n      .get(query2)\r\n      .then((response) => {\r\n        console.log(\"Search response\", response.data);\r\n        if (response.status === 200) {\r\n          const productArray = response.data.productArray;\r\n          this.setState({ productArray });\r\n          window.history.pushState(\"page2\", \"seach made\", `/search?${queryString}`);\r\n        } else {\r\n          console.log(response.data.message)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let params = this.getFiltersOnMount();\r\n    this.searchAlgorithm(params)\r\n  }, [])\r\n\r\n    return (\r\n      <div className=\" \">\r\n          <button  onClick={makeSearch}>\r\n            Search\r\n          </button>\r\n          <select defaultValue=\"\">\r\n            <option value=\"\" disabled>Select a main category</option>\r\n            <option>biler</option>\r\n            <option>enebolig</option>\r\n          </select>\r\n          {productArray.map(item => {\r\n            return(\r\n              <ProductCard\r\n                img = {item.annonceImages}\r\n                name={item.title}\r\n                location={item.location}\r\n                price={item.price}\r\n                id={item._id}\r\n              ></ProductCard>\r\n            )\r\n          })}\r\n      </div>\r\n    );\r\n  \r\n}\r\n\r\nexport default SearchResult;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAO,oBAAoB;AAC3B,OAAOC,WAAW,MAAM,4CAA4C;AACpE,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,QAAQ,kBAAkB;AAAC;AAG7C,MAAMC,YAAY,GAAG,MAAM;EAAA;EAEzB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGH,SAAS,CAAC,EAAE,CAAC;EACrD,MAAMI,QAAQ,GAAGC,KAAK;EACtB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGP,SAAS,CAAC,CAAC;IACvCQ,QAAQ,EAAE,GAAG;IACbC,UAAU,EAAG,IAAIC,eAAe,CAACC,KAAK,CAACP,QAAQ,CAACQ,MAAM,CAAC,CAACC,GAAG,CAAC,GAAG;EACjE,CAAC,CAAC,CAAC;EACH,MAAMC,SAAS,GAAG,IAAIJ,eAAe,CAACC,KAAK,CAACP,QAAQ,CAACQ,MAAM,CAAC;;EAG9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEE,MAAMG,eAAe,GAAIT,OAAO,IAAK;IAEnC,IAAIU,WAAW,GAAG,IAAI,CAACC,iBAAiB,CAACX,OAAO,CAAC;IACjD;IACA,IAAIY,MAAM,GAAG,oBAAoB;IACjCnB,WAAW,CACRc,GAAG,CAACK,MAAM,CAAC,CACXC,IAAI,CAAEC,QAAQ,IAAK;MAClBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEF,QAAQ,CAACG,IAAI,CAAC;MAC7C,IAAIH,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QAC3B,MAAMtB,YAAY,GAAGkB,QAAQ,CAACG,IAAI,CAACrB,YAAY;QAC/C,IAAI,CAACuB,QAAQ,CAAC;UAAEvB;QAAa,CAAC,CAAC;QAC/BwB,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,OAAO,EAAE,YAAY,EAAG,WAAUZ,WAAY,EAAC,CAAC;MAC3E,CAAC,MAAM;QACLK,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,IAAI,CAACM,OAAO,CAAC;MACpC;IACF,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;MACdV,OAAO,CAACC,GAAG,CAACS,GAAG,CAAC;IAClB,CAAC,CAAC;EACN,CAAC;EAEDlC,SAAS,CAAC,MAAM;IACd,IAAImC,MAAM,GAAG,IAAI,CAACC,iBAAiB,EAAE;IACrC,IAAI,CAAClB,eAAe,CAACiB,MAAM,CAAC;EAC9B,CAAC,EAAE,EAAE,CAAC;EAEJ,oBACE;IAAK,SAAS,EAAC,GAAG;IAAA,wBACd;MAAS,OAAO,EAAEE,UAAW;MAAA,UAAC;IAE9B;MAAA;MAAA;MAAA;IAAA,QAAS,eACT;MAAQ,YAAY,EAAC,EAAE;MAAA,wBACrB;QAAQ,KAAK,EAAC,EAAE;QAAC,QAAQ;QAAA,UAAC;MAAsB;QAAA;QAAA;QAAA;MAAA,QAAS,eACzD;QAAA,UAAQ;MAAK;QAAA;QAAA;QAAA;MAAA,QAAS,eACtB;QAAA,UAAQ;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QAClB,EACRhC,YAAY,CAACiC,GAAG,CAACC,IAAI,IAAI;MACxB,oBACE,QAAC,WAAW;QACV,GAAG,EAAIA,IAAI,CAACC,aAAc;QAC1B,IAAI,EAAED,IAAI,CAACE,KAAM;QACjB,QAAQ,EAAEF,IAAI,CAAChC,QAAS;QACxB,KAAK,EAAEgC,IAAI,CAACG,KAAM;QAClB,EAAE,EAAEH,IAAI,CAACI;MAAI;QAAA;QAAA;QAAA;MAAA,QACA;IAEnB,CAAC,CAAC;EAAA;IAAA;IAAA;IAAA;EAAA,QACA;AAGZ,CAAC;AAAA,GA3KKvC,YAAY;EAAA,QAEwBD,SAAS,EAEnBA,SAAS;AAAA;AAAA,KAJnCC,YAAY;AA6KlB,eAAeA,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module"}